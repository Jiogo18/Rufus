{
    "app-id": "org.flatpak.rufus",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.11",
    "sdk": "org.kde.Sdk",
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.gcc7"
    ],
    "command": "rufus",
    "finish-args": [
        "--share=ipc",
        "--socket=x11",
        "--socket=wayland",
        "--filesystem=host",
        "--device=dri"
    ],
    "build-options": {
        "env": {
            "CC": "/usr/lib/sdk/gcc7/bin/gcc",
            "CXX": "/usr/lib/sdk/gcc7/bin/g++"}
            },

 "modules": [
        {
            "name": "openjpeg",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=Release"
            ],
            "cleanup": [
                "/bin",
                "/lib/openjpeg-*",
                "*.a"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/uclouvain/openjpeg/archive/v2.3.0.tar.gz",
                    "sha256": "3dc787c1bb6023ba846c2a0d9b1f6e179f1cd255172bde9eb75b01f1e6c7d71a"
                }
            ]
        },
        {
            "name": "popplerdata",
            "no-autogen": true,
            "make-install-args": [
                "prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://poppler.freedesktop.org/poppler-data-0.4.9.tar.gz",
                    "sha256": "1f9c7e7de9ecd0db6ab287349e31bf815ca108a5a175cf906a90163bdbe32012"
                }
            ]
        },
        {
            "name": "poppler",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_INSTALL_LIBDIR=/app/lib",
                "-DCMAKE_INSTALL_INCLUDEDIR=/app/include"
            ],
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://poppler.freedesktop.org/poppler-0.71.0.tar.xz",
		    "sha256": "CA262C6C83DE4D2FB28A332A3A6A4DB839EAA6D7"
                }
            ]
        },
        {
			"name": "rufus",
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/ukinoki/Rufus.git",
				}
			],
			"build-commands": [              
				"qmake -unix PREFIX=/usr Rufus_travis.pro",
				"make -j$(nproc) CXX=g++-7 CC=gcc-7",
                "make install"
			 ]
            }
            ]
}
